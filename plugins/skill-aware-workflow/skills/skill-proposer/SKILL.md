---
name: skill-proposer
description: This skill should be used after task completion to propose new skills. It proposes TWO types of skills - (1) technical skills from friction/learnings, and (2) workflow skills from multi-step processes. Triggers after task completion, when user asks about skill creation, or when a multi-step workflow completes. Always propose first, then create if approved.
version: 2.0.0
---

# Skill Proposer

タスク完了後に新しいスキル作成を**提案**するスキル。

## 2種類のスキル提案

### 1. テクニカルスキル（従来型）

実行中の摩擦から学んだ技術的なノウハウ。

- ライブラリの選び方
- 設定手順
- API使用法
- エラー回避方法

### 2. ワークフロースキル（新規）

複数ステップからなるプロセス全体をスキル化。

- 事業計画 → PRD → 実装
- 設計 → デザイン → 実装 → テスト
- 調査 → 提案 → レビュー → 適用

## 提案トリガー

### テクニカルスキル提案

1. **高摩擦スコア**: `friction_score >= 5`
2. **複数回のピボット**: `pivots.length >= 2`
3. **明示的修正の蓄積**: `explicit_correction` が2回以上

### ワークフロースキル提案

1. **複数フェーズの完了**: 3つ以上の明確なフェーズを経たタスク
2. **プロセスパターンの検出**: 計画→実行→検証のようなパターン
3. **再利用可能性**: 同様のプロセスが他のプロジェクトでも使えそう

### 手動トリガー

- 「スキルを作った方がいい？」
- 「これをスキル化できる？」
- 「このワークフローをまとめて」
- `/reflect` コマンド

## ワークフロースキル提案の例

### 検出パターン

```yaml
detected_workflow:
  name: "機能開発フロー"
  phases:
    - phase: 1
      name: "要件定義"
      activities: ["PRD作成", "ユーザーストーリー整理"]
    - phase: 2
      name: "設計"
      activities: ["API設計", "DB設計", "UI設計"]
    - phase: 3
      name: "実装"
      activities: ["バックエンド実装", "フロントエンド実装"]
    - phase: 4
      name: "検証"
      activities: ["テスト作成", "動作確認"]

  total_time: "3時間"
  reusability: high
```

### 提案フォーマット

```markdown
## 🔄 ワークフロースキル提案

今回のタスクは複数のフェーズを経て完了しました：

### 検出されたワークフロー
1. **要件定義**: PRD作成、ユーザーストーリー整理
2. **設計**: API設計、DB設計
3. **実装**: バックエンド、フロントエンド
4. **検証**: テスト、動作確認

### 提案: `feature-development-workflow` スキル

このワークフローをスキル化すると：
- 次回の機能開発で同じプロセスをガイド
- 各フェーズのチェックリストとして活用
- チームメンバーへの手順共有に使える

**スキル化しますか？**
1. ✅ はい、ワークフロースキルを作成
2. 📝 内容を調整してから作成
3. ❌ 今回は作成しない
```

## テクニカルスキル提案の例

```markdown
## 🔧 テクニカルスキル提案

今回のタスクで以下の摩擦がありました：

### 摩擦ポイント
- ❌ pypdf → pikepdf へのライブラリ変更
- ⏱️ AcroForm 仕様の理解に時間

### 提案: `pdf-form-creator` スキル

このスキルを作成すると：
- 推奨ライブラリ（pikepdf）がすぐ分かる
- フォームフィールド追加手順が明確に

**スキル化しますか？**
1. ✅ はい、テクニカルスキルを作成
2. 📝 内容を調整してから作成
3. ❌ 今回は作成しない
```

## 両方提案するケース

1つのタスクでワークフローと技術的学びの両方がある場合：

```markdown
## 📋 スキル作成提案

今回のタスクから2種類のスキルを提案します：

---

### 1. ワークフロースキル: `api-integration-workflow`

検出されたフロー:
1. API仕様調査 → 2. 認証設定 → 3. エンドポイント実装 → 4. エラーハンドリング

---

### 2. テクニカルスキル: `oauth2-setup`

学び:
- OAuth2の認証フローで複数回修正
- トークンリフレッシュの実装パターンを習得

---

**どちらを作成しますか？**
1. 両方作成
2. ワークフローのみ
3. テクニカルのみ
4. 今回は作成しない
```

## 提案しないケース

以下の場合はスキル提案を控える：

1. **単純なタスク**: 1-2ステップで完了
2. **一回限りのタスク**: 再発しない特殊ケース
3. **既存スキルで対応可能**: ローカルに類似スキルあり
4. **摩擦もフローもない**: スムーズに完了した単発タスク

## 重要な原則

### 提案 → 承認 → 作成

```
提案フェーズ（このスキル）
    │
    ▼
ユーザー確認「作りますか？」
    │
    ├── YES → skill-creator で作成
    │
    ├── 調整 → 内容を修正してから作成
    │
    └── NO → 何もしない
```

**スキルは必ずユーザーの承認を得てから作成する。**

提案段階では：
- 何をスキル化できるか説明
- 期待される効果を提示
- ユーザーに選択肢を与える

## skill-creator との連携

ユーザーが承認した場合：

1. この提案内容を skill-creator に引き継ぎ
2. ワークフロースキルかテクニカルスキルかを明示
3. 今回のタスクを具体例として活用
4. 必要に応じて追加要件をヒアリング

## 参照

- `references/workflow-patterns.md` - よくあるワークフローパターン
- `references/proposal-templates.md` - 提案テンプレート集
